name: Docs to PDF

on:
  push:
    branches:
      - main
    paths:
      - '**.md'
  workflow_dispatch:

jobs:
  convert:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v2

    - name: Install Pandoc
      run: sudo apt-get update && sudo apt-get install -y pandoc texlive-xetex

    - name: Convert Markdown files to PDF
      run: |
        for file in *.md; do
          if [ -f "$file" ]; then
            pandoc "$file" -o "${file%.md}.pdf"
          fi
        done

    - name: Commit and push PDF files
      run: |
        git config --global user.name 'github-actions'
        git config --global user.email 'github-actions@github.com'
        git add *.pdf
        git commit -m "Add generated PDF files"
        git push
